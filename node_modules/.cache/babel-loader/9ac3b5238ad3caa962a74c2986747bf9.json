{"ast":null,"code":"import _defineProperty from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{useState,Component}from'react';import{Link}from'react-router-dom';import'../styles/home.css';import'../styles/streamingplaza.css';import'../styles/waitingroom.css';import{Alert,Button,Card,CardDeck,Image,ListGroup,Modal,Form,Container}from'react-bootstrap';import'bootstrap/dist/css/bootstrap.min.css';import NavBar from'./navbar';import StreamingCard from'./design/streamingcard';import ChatBox from'./chatbox.js';import firebase from'../config/firebaseconfig';//Redux\nimport{connect}from'react-redux';import{compose}from'redux';import{firestoreConnect}from'react-redux-firebase';import{startStreaming}from'../redux/actions';//[TO BE COMPLETED].\n/*\n<Form.Group controlId=\"link\">\n<Form.Control inputRef={(ref) => this.link = ref}></Form.Control>\n</Form.Group>\n\n<Form.Group controlId=\"description\">\n  <Form.Control inputRef={(ref) => this.description= ref}></Form.Control>\n</Form.Group>\n*/ //For the minimum viable product, this page will look very similar to the waiting room page except that (1) users post their meeting links\n//on this page and (2) we may need to use Zoom's API to get the number of participants in a meeting and display the number on the page.\nvar taskfilters=['Startup/Personal Project','Work/Internship','Study','Interview Preparation','Exam Preparation','Reading Books','Research','Brainstorming','Finance/Investment/VC','Business Analysis','Software Engineering','Data Science','UI/UX Design','Artificial Intelligence','Electrical Engineering','Mechanical Engineering','Biomedical Engineering','Mathematics','Physics','Chemistry','Psychology','Economics','History','Politics','Law','Healthcare','Arts'];var StreamingPlaza=/*#__PURE__*/function(_Component){_inherits(StreamingPlaza,_Component);var _super=_createSuper(StreamingPlaza);function StreamingPlaza(){var _this;_classCallCheck(this,StreamingPlaza);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={link:\"\",description:\"\",show:false,routeguarding:false,tasks:[],reduxtasks:[],filterVisibility:false};_this.randomClick=function(e){e.preventDefault();_this.roomclicks.current[0].handleClick();};_this.handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return _this.props.startStreaming(_this.state);case 3:_this.handleClose();case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleShow=function(e){e.preventDefault();var auth=_this.props.auth;if(!auth.uid){_this.setState({routeguarding:true});}else _this.setState({show:true});};_this.handleClose=function(){_this.setState({show:false});};_this.handleCloseRedirect=function(){_this.setState({routeguarding:false});};_this.handleChange=function(e){e.preventDefault();_this.setState(_defineProperty({},e.target.id,e.target.value));};_this.setRef=function(ref){_this.roomclicks.push(ref);};_this.renderRoom=function(room){if(room.open===true){if(room.id!==\"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\"&&_this.state.tasks.every(function(t){return room.tasks_tags&&room.tasks_tags.includes(t);})){return/*#__PURE__*/React.createElement(StreamingCard,{info:room});}}};_this.updateReduxTasks=function(e){e.preventDefault();if(e.target.className===\"unselected-button\"){var helper=_this.state.reduxtasks;helper.push(e.target.id);_this.setState({reduxtasks:helper});e.target.className=\"selected-button\";}else{var newfilters=_this.state.reduxtasks.filter(function(tag){return tag!==e.target.id;});_this.setState({reduxtasks:newfilters});e.target.className=\"unselected-button\";}};_this.updateTasks=function(e){e.preventDefault();if(e.target.className===\"unselected-button\"){var helper=_this.state.tasks;helper.push(e.target.id);_this.setState({tasks:helper});e.target.className=\"selected-button\";}else{var newfilters=_this.state.tasks.filter(function(tag){return tag!==e.target.id;});_this.setState({tasks:newfilters});e.target.className=\"unselected-button\";}};_this.showFilter=function(e){e.preventDefault();_this.setState({filterVisibility:true});};_this.closeFilter=function(){_this.setState({filterVisibility:false});};return _this;}_createClass(StreamingPlaza,[{key:\"componentDidMount\",//roomclicks = React.createRef([]);\nvalue:function componentDidMount(){var _this2=this;var auth=this.props.auth;/*\n    setTimeout(() => {\n      console.log(this.child);\n      console.log(this.child.current);\n      this.child.current.handleShow();\n    }, 4000);\n    */if(auth.uid){firebase.firestore().collection(\"rooms\").doc(auth.uid).get().then(function(doc){if(doc.exists){_this2.setState({link:doc.data().meeting_link,description:doc.data().room_description});}});}}},{key:\"render\",value:function render(){var _this3=this;var _this$props=this.props,auth=_this$props.auth,rooms=_this$props.rooms,profile=_this$props.profile;var founderprofile;if(rooms){var founder=rooms.find(function(element){return element.id===\"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\";});if(founder.open===true){founderprofile=/*#__PURE__*/React.createElement(StreamingCard,{info:founder});}}return/*#__PURE__*/React.createElement(\"div\",null,auth.uid||auth.isEmpty&&auth.isLoaded?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavBar,null),sessionStorage.noFirstVisit===1?/*#__PURE__*/React.createElement(Alert,{style:{width:\"600px\",position:\"absolute\",top:\"10%\",left:\"20%\"},variant:\"warning\"},\"LOL Bear with the simplicity of the website! We will make it more like an actual live streaming site if people find it to be useful.\\uD83D\\uDE23\"):null,auth.uid?/*#__PURE__*/React.createElement(\"div\",{className:\"chatbox-header\"},/*#__PURE__*/React.createElement(ChatBox,{roomid:auth.uid})):null,/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{className:\"update-button\",onClick:this.handleShow,style:{position:\"absolute\",top:\"15%\",fontSize:\"large\",fontFamily:\"Comic Sans MS, cursive, sans-serif\"}},\"Start/update streaming\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"success\",onClick:this.showFilter,style:{marginLeft:\"70px\",position:\"absolute\",top:\"25%\",fontFamily:\"Lucida Console, Monaco, monospace\",fontSize:\"large\"}},\"Filter by tags\")),/*#__PURE__*/React.createElement(Modal,{show:this.state.filterVisibility,onHide:this.closeFilter},/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\",style:{margin:\"5px \"},id:\"filters\"},taskfilters.map(function(filter){return/*#__PURE__*/React.createElement(\"div\",{className:_this3.state.tasks&&_this3.state.tasks.includes(filter)?\"selected-button\":\"unselected-button\",id:filter,onClick:_this3.updateTasks},filter);}))),/*#__PURE__*/React.createElement(Modal,{show:this.state.show,onHide:this.handleClose},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:\"20px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:\"large\",fontFamily:\"Trebuchet MS, Helvetica, sans-serif\"}},\"Meeting link:\"),/*#__PURE__*/React.createElement(\"input\",{id:\"link\",value:this.state.link,onChange:this.handleChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:\"20px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:\"large\",fontFamily:\"Trebuchet MS, Helvetica, sans-serif\"}},\"Enter a description:\"),/*#__PURE__*/React.createElement(\"textarea\",{id:\"description\",value:this.state.description,onChange:this.handleChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:\"20px\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:\"large\",fontFamily:\"Trebuchet MS, Helvetica, sans-serif\"}},\"Select a few tags:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\"},taskfilters.map(function(filter){return/*#__PURE__*/React.createElement(\"div\",{className:_this3.state.reduxtasks&&_this3.state.reduxtasks.includes(filter)?\"selected-button\":\"unselected-button\",id:filter,onClick:_this3.updateReduxTasks},filter);}))),/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\"},\"Submit\")))),/*#__PURE__*/React.createElement(Modal,{show:this.state.routeguarding,onHide:this.handleCloseRedirect},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true}),/*#__PURE__*/React.createElement(Modal.Body,null,\"Sign up to create a profile before streaming so that other users can know more about you!\\uD83D\\uDE0A\")),/*#__PURE__*/React.createElement(Container,{fluid:true,style:{position:\"absolute\",top:\"30%\",zIndex:\"-1\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\",ref:this.roomclicks},founderprofile,rooms&&rooms.map(function(room){return _this3.renderRoom(room);}))))):/*#__PURE__*/React.createElement(\"div\",{class:\"loader\"}));}}]);return StreamingPlaza;}(Component);/*\n{ rooms && rooms.map (room => {\n  return (\n    <StreamingCard info={room}></StreamingCard>\n  );\n  })  \n}\n*/ /*\n  state = {\n\n        areasofinterest: [\"Math\", \"Physics\", \"Science\",\"Algebra\",\n         \"Biology\", \"Spanish\", \"Stats\", \"Calculus I\", \"Calculus II\",\"French\",\n          \"English\", \"Science\",\"Math\", \"Physics\", \"Science\"],\n    }\n    render() {\n\n      return (\n        <div>\n        {<Navbar />}\n        <div className='container'>\n        <h2>Live streaming rooms <br/>   </h2>\n          <div className=\"row\">\n          {this.state.areasofinterest.map(function (i) {\n              return   (\n                <div className=\"column\">\n                <CardDeck  className=\"chat_room_card\" >\n                  <Card border='success'>\n                    <Card.Body className=''>\n                      <Card.Title className=\"text-center\">{i}</Card.Title>\n\n                      <Card.Text>\n\n                      </Card.Text>\n                      <Button variant='success'>Join room</Button>\n                    </Card.Body>\n                  </Card>\n\n                </CardDeck>\n                </div>\n\n              )})}\n              </div>\n              <div className='title'>\n          <h1 className='title_font'>üßô‚Äç‚ôÇÔ∏èsalon.app</h1>\n          </div><br/>\n          </div>\n          </div>\n      );\n        }\n        */var mapStateToProps=function mapStateToProps(state){return{rooms:state.firestore.ordered.rooms,auth:state.firebase.auth,profile:state.firebase.profile};};export default compose(connect(mapStateToProps,{startStreaming:startStreaming}),firestoreConnect([{collection:'rooms'}]))(StreamingPlaza);/*\n      <Container fluid style={{ position: \"absolute\", top: \"30%\", zIndex: \"-1\"}}>\n        <div className=\"form-inline\">\n        {founderprofile}\n        { rooms && rooms.map (room => {\n          return this.renderRoom(room);  \n        })\n      }\n        </div>\n        </Container>\n        */","map":{"version":3,"sources":["/Users/liu550/Desktop/salon_project/src/components/streamingplaza.js"],"names":["React","useState","Component","Link","Alert","Button","Card","CardDeck","Image","ListGroup","Modal","Form","Container","NavBar","StreamingCard","ChatBox","firebase","connect","compose","firestoreConnect","startStreaming","taskfilters","StreamingPlaza","state","link","description","show","routeguarding","tasks","reduxtasks","filterVisibility","randomClick","e","preventDefault","roomclicks","current","handleClick","handleSubmit","props","handleClose","handleShow","auth","uid","setState","handleCloseRedirect","handleChange","target","id","value","setRef","ref","push","renderRoom","room","open","every","t","tasks_tags","includes","updateReduxTasks","className","helper","newfilters","filter","tag","updateTasks","showFilter","closeFilter","firestore","collection","doc","get","then","exists","data","meeting_link","room_description","rooms","profile","founderprofile","founder","find","element","isEmpty","isLoaded","sessionStorage","noFirstVisit","width","position","top","left","fontSize","fontFamily","marginLeft","margin","map","marginBottom","zIndex","mapStateToProps","ordered"],"mappings":"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","sourcesContent":["import React, { useState, Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport '../styles/home.css';\nimport '../styles/streamingplaza.css';\nimport '../styles/waitingroom.css';\n\nimport { Alert, Button, Card, CardDeck, Image, ListGroup, Modal, Form, Container } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport NavBar from './navbar';\nimport StreamingCard from './design/streamingcard';\nimport ChatBox from './chatbox.js';\nimport firebase from '../config/firebaseconfig';\n\n//Redux\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { startStreaming } from '../redux/actions';\n\n//[TO BE COMPLETED].\n\n/*\n<Form.Group controlId=\"link\">\n<Form.Control inputRef={(ref) => this.link = ref}></Form.Control>\n</Form.Group>\n\n<Form.Group controlId=\"description\">\n  <Form.Control inputRef={(ref) => this.description= ref}></Form.Control>\n</Form.Group>\n*/\n\n//For the minimum viable product, this page will look very similar to the waiting room page except that (1) users post their meeting links\n//on this page and (2) we may need to use Zoom's API to get the number of participants in a meeting and display the number on the page.\n\nconst taskfilters = [\n  'Startup/Personal Project',\n  'Work/Internship',\n  'Study',\n  'Interview Preparation',\n  'Exam Preparation',\n  'Reading Books',\n  'Research',\n  'Brainstorming',\n  'Finance/Investment/VC',\n  'Business Analysis',\n  'Software Engineering',\n  'Data Science',\n  'UI/UX Design',\n  'Artificial Intelligence',\n  'Electrical Engineering',\n  'Mechanical Engineering',\n  'Biomedical Engineering',\n  'Mathematics',\n  'Physics',\n  'Chemistry',\n  'Psychology',\n  'Economics',\n  'History',\n  'Politics',\n  'Law',\n  'Healthcare',\n  'Arts'\n];\n\nclass StreamingPlaza extends Component {\n\n  /*\n  constructor(props){\n    super(props);\n    this.state = {\n      link: \"\",\n      description: \"\",\n      show: false,\n      routeguarding: false,\n      tasks: [],\n      reduxtasks: [],\n      filterVisibility: false\n      }\n\n      this.roomclicks = React.createRef([]);\n      this.child = React.createRef();\n  }\n  */\n\n  state = {\n    link: \"\",\n    description: \"\",\n    show: false,\n    routeguarding: false,\n    tasks: [],\n    reduxtasks: [],\n    filterVisibility: false\n    }\n\n    //roomclicks = React.createRef([]);\n\n  componentDidMount() {\n    const { auth } = this.props;\n    /*\n    setTimeout(() => {\n      console.log(this.child);\n      console.log(this.child.current);\n      this.child.current.handleShow();\n    }, 4000);\n    */\n    if (auth.uid) {\n      firebase.firestore().collection(\"rooms\").doc(auth.uid)\n      .get()\n      .then((doc) => {\n        if (doc.exists) {\n          this.setState({\n            link: doc.data().meeting_link,\n            description: doc.data().room_description\n          })\n        }\n      })\n    }\n  }\n\n  randomClick = (e) => {\n    e.preventDefault();\n    this.roomclicks.current[0].handleClick();\n  }\n\n  handleSubmit = async (e) => {\n    e.preventDefault();\n    await this.props.startStreaming(this.state);\n    this.handleClose();\n  }\n\n  handleShow = (e) => {\n    e.preventDefault();\n    const { auth } = this.props;\n    if (!auth.uid) {\n      this.setState({ routeguarding: true });\n    } else this.setState({ show: true });\n  }\n\n  handleClose = () => {\n    this.setState({ show: false });\n  }\n\n  handleCloseRedirect = () => {\n    this.setState({ routeguarding: false });\n  }\n\n  handleChange = (e) => {\n    e.preventDefault();\n    this.setState({\n      [e.target.id]: e.target.value\n    })\n  }\n\n  setRef = (ref) => {\n    this.roomclicks.push(ref);\n  }\n\n  \n  renderRoom = (room) => {\n    if (room.open === true) {\n      if (room.id !== \"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\" && this.state.tasks.every(t => room.tasks_tags && room.tasks_tags.includes(t))) {\n        return <StreamingCard info={room}></StreamingCard>;\n      }\n    }\n  }\n\n  updateReduxTasks = (e) => {\n    e.preventDefault();\n  \n   if (e.target.className === \"unselected-button\") {\n    const helper = this.state.reduxtasks;\n    helper.push(e.target.id);\n    this.setState({ reduxtasks : helper });\n    e.target.className = \"selected-button\";\n   }\n    else {\n      const newfilters = this.state.reduxtasks.filter(tag => tag !== e.target.id);\n      this.setState({ reduxtasks : newfilters });\n      e.target.className = \"unselected-button\";\n    }\n  }\n\n\n  updateTasks = (e) => {\n    e.preventDefault();\n   if (e.target.className === \"unselected-button\") {\n    const helper = this.state.tasks;\n    helper.push(e.target.id);\n    this.setState({ tasks : helper });\n    e.target.className = \"selected-button\";\n   }\n    else {\n      const newfilters = this.state.tasks.filter(tag => tag !== e.target.id);\n      this.setState({ tasks : newfilters });\n      e.target.className = \"unselected-button\";\n    }\n  }\n\n  showFilter = (e) => {\n    e.preventDefault();\n    this.setState({\n      filterVisibility: true\n    })\n  }\n\n  closeFilter = () => {\n    this.setState({\n      filterVisibility: false\n    })\n  }\n  \n\n  render() {\n\n    const { auth, rooms, profile } = this.props;\n\n    let founderprofile;\n    if (rooms) {\n      const founder = rooms.find(element => element.id === \"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\");\n      if (founder.open === true) {\n        founderprofile = <StreamingCard info={founder}></StreamingCard>;\n      }\n      \n    }\n\n\n    return (\n\n      <div>\n      {auth.uid || (auth.isEmpty && auth.isLoaded) ? \n      <div>\n        {<NavBar />}\n\n        {sessionStorage.noFirstVisit === 1 ? <Alert  style={{ width: \"600px\", position: \"absolute\", top: \"10%\", left: \"20%\" }} variant=\"warning\">LOL Bear with the simplicity of the website! We will make it more like an actual live streaming site if people find it to be useful.üò£</Alert> : null }\n\n        {auth.uid ?\n           <div className=\"chatbox-header\">\n             <ChatBox roomid={auth.uid} />\n           </div>\n           : null}\n\n       \n          <Container fluid>\n            \n          <div>\n        <Button className=\"update-button\" onClick={this.handleShow} style={{ position: \"absolute\", top: \"15%\", fontSize: \"large\", fontFamily: \"Comic Sans MS, cursive, sans-serif\"}}>Start/update streaming</Button>\n        </div>\n\n        <div>\n        <Button variant=\"success\" onClick={this.showFilter} style={{ marginLeft: \"70px\", position: \"absolute\", top: \"25%\", fontFamily: \"Lucida Console, Monaco, monospace\", fontSize: \"large\" }}>Filter by tags</Button>\n        </div>\n        \n            <Modal show={this.state.filterVisibility} onHide={this.closeFilter}>\n            <div className=\"form-inline\" style={{ margin: \"5px \"}}id=\"filters\">\n              {taskfilters.map(filter => {\n                return (\n                  <div className={this.state.tasks && this.state.tasks.includes(filter) ? \"selected-button\" : \"unselected-button\"} id={filter} onClick={this.updateTasks}>\n                    {filter}\n                    </div>\n                );\n              })}\n            </div>\n            </Modal>\n           \n\n        <Modal show={this.state.show} onHide={this.handleClose}>\n          <Modal.Header closeButton></Modal.Header>\n          <Modal.Body>\n            \n            <form onSubmit={this.handleSubmit}>\n            <div style={{ marginBottom: \"20px\"}}>\n              <span style={{ fontSize: \"large\", fontFamily: \"Trebuchet MS, Helvetica, sans-serif\"}}>Meeting link:</span>\n              <input id=\"link\" value={this.state.link} onChange={this.handleChange} required></input>\n            </div>\n\n            <div style={{ marginBottom: \"20px\"}}>\n              <span style={{ fontSize: \"large\", fontFamily: \"Trebuchet MS, Helvetica, sans-serif\"}}>Enter a description:</span>\n              <textarea id=\"description\" value={this.state.description} onChange={this.handleChange} required></textarea>\n              </div>\n\n              <div style={{ marginBottom: \"20px\"}}>\n              <span style={{ fontSize: \"large\", fontFamily: \"Trebuchet MS, Helvetica, sans-serif\"}}>Select a few tags:</span>\n                    <div className=\"form-inline\">\n                    {taskfilters.map(filter => {\n                      return (\n                        <div className={this.state.reduxtasks && this.state.reduxtasks.includes(filter) ? \"selected-button\" : \"unselected-button\" } id={filter} onClick={this.updateReduxTasks}>\n                          {filter}\n                        </div>\n                      )\n                    })}\n                    </div>\n                    </div>\n\n              <Button variant=\"success\" type=\"submit\">Submit</Button>\n            </form>\n          </Modal.Body>\n        </Modal>\n\n        <Modal show={this.state.routeguarding} onHide={this.handleCloseRedirect}>\n          <Modal.Header closeButton></Modal.Header>\n          <Modal.Body>\n            Sign up to create a profile before streaming so that other users can know more about you!üòä\n          </Modal.Body>\n        </Modal>\n\n\n        <Container fluid style={{ position: \"absolute\", top: \"30%\", zIndex: \"-1\"}}>\n        <div className=\"form-inline\" ref={this.roomclicks}>\n        {founderprofile}\n        { rooms && rooms.map (room => {\n          return this.renderRoom(room);  \n        })\n      }\n        \n\n        </div>\n        </Container>\n\n\n        </Container>\n \n\n      </div>\n      : <div class=\"loader\"></div>}\n      </div>\n    );\n  }\n}\n/*\n{ rooms && rooms.map (room => {\n  return (\n    <StreamingCard info={room}></StreamingCard>\n  );\n  })  \n}\n*/\n  /*\n  state = {\n\n        areasofinterest: [\"Math\", \"Physics\", \"Science\",\"Algebra\",\n         \"Biology\", \"Spanish\", \"Stats\", \"Calculus I\", \"Calculus II\",\"French\",\n          \"English\", \"Science\",\"Math\", \"Physics\", \"Science\"],\n    }\n    render() {\n\n      return (\n        <div>\n        {<Navbar />}\n        <div className='container'>\n        <h2>Live streaming rooms <br/>   </h2>\n          <div className=\"row\">\n          {this.state.areasofinterest.map(function (i) {\n              return   (\n                <div className=\"column\">\n                <CardDeck  className=\"chat_room_card\" >\n                  <Card border='success'>\n                    <Card.Body className=''>\n                      <Card.Title className=\"text-center\">{i}</Card.Title>\n\n                      <Card.Text>\n\n                      </Card.Text>\n                      <Button variant='success'>Join room</Button>\n                    </Card.Body>\n                  </Card>\n\n                </CardDeck>\n                </div>\n\n              )})}\n              </div>\n              <div className='title'>\n          <h1 className='title_font'>üßô‚Äç‚ôÇÔ∏èsalon.app</h1>\n          </div><br/>\n          </div>\n          </div>\n      );\n        }\n        */\n\nconst mapStateToProps = (state) => {\n  return {\n    rooms: state.firestore.ordered.rooms,\n    auth: state.firebase.auth,\n    profile: state.firebase.profile\n  }\n}\n\nexport default compose(\n  connect(mapStateToProps, {startStreaming}),\n  firestoreConnect([\n    { collection: 'rooms' }\n  ])\n)(StreamingPlaza);\n\n\n\n/*\n      <Container fluid style={{ position: \"absolute\", top: \"30%\", zIndex: \"-1\"}}>\n        <div className=\"form-inline\">\n        {founderprofile}\n        { rooms && rooms.map (room => {\n          return this.renderRoom(room);  \n        })\n      }\n        </div>\n        </Container>\n        */"]},"metadata":{},"sourceType":"module"}