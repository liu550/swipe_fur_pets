{"ast":null,"code":"import _regeneratorRuntime from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component,useState}from'react';import'../../styles/card.css';import{Button,Modal,ModalFooter}from'react-bootstrap';import Card from'./card.js';import firebase from'../../config/firebaseconfig';import'../component.css';import HostCard from'./hostcard.js';import ditto from'../ditto.png';import{connect}from'react-redux';import{removeStreaming}from'../../redux/actions';import{joinSession}from'../../redux/actions';import ProfileCard from'../profilecard.js';/*\nconst StreamingCard = (props) => {\n\n    const [show, setShow] = useState(false);\n    const handleShow = () => setShow(true);\n    const handleClose = () => setShow(false);\n\n\n\n    const user = firebase.firestore().collection(\"users\").doc(props.info.host);\n\n  return (\n    <div className=\"card-container\">\n      <div className='profile-content'>\n\n      <div>\n          <div>\n            <img src={props.user.image}></img>\n            <Button variant=\"primary\" onClick={handleShow}>Click to learn more about me</Button>\n            <Modal show={show} onClick={handleClose}>\n                <Card info={props.info}></Card>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={handleClose}>\n                        Close\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n          </div>\n          <div class=\"name\">\n            Host: {props.user.first_name} {props.user.last_name}\n          </div>\n        </div>\n\n    <div>\n        <div>\n          {props.info.meeting_link}\n        </div>\n        <div>\n            {props.info.room_description}\n        </div>\n    </div>\n\n\n        </div>\n      </div>\n\n  );\n}\n\n\nexport default StreamingCard;\n*/var StreamingCard=/*#__PURE__*/function(_Component){_inherits(StreamingCard,_Component);var _super=_createSuper(StreamingCard);function StreamingCard(props){var _this;_classCallCheck(this,StreamingCard);_this=_super.call(this,props);_this.handleShow=function(e){e.preventDefault();_this.setState({show:true});};_this.handleClose=function(){_this.setState({show:false});};_this.handleRemove=function(e){e.preventDefault();_this.props.removeStreaming();};_this.handleJoin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var date,time;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();date=new Date();time=date.getFullYear()+\"-\"+(date.getMonth()+1)+\"-\"+date.getDate()+\" \"+date.getHours()+\":\"+date.getMinutes();_this.props.joinSession(_this.props.info.host,time);window.open(_this.props.info.meeting_link);case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleClick=function(){console.log(\"called\");//document.getElementById(\"link\").click();\n};_this.renderParticipants=function(e){e.preventDefault();_this.setState({showParticipants:true});};_this.hideParticipants=function(){_this.setState({showParticipants:false});};_this.renderProfile=function(id){_this.setState({showProfile:true,whoseProfile:id});};_this.hideProfile=function(){_this.setState({showProfile:false});};_this.state={user:\"\",show:false,showProfile:false,showParticipants:false,whoseProfile:false};return _this;}/*\n  state = {\n    user: \"\",\n    show: false,\n    showProfile: false,\n    showParticipants: false,\n    whoseProfile: false\n  }\n  */_createClass(StreamingCard,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;firebase.firestore().collection(\"users\").doc(this.props.info.host).get().then(function(doc){_this2.setState({user:doc.data()});});}},{key:\"render\",value:function render(){var _this3=this;var user=this.state.user;var auth=this.props.auth;return/*#__PURE__*/React.createElement(\"div\",{className:\"card-container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-content\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{src:user.image?user.image:ditto}),/*#__PURE__*/React.createElement(Button,{variant:\"success\",onClick:this.handleShow},\"\\uD83D\\uDC40 More about me\"),\" \",auth.uid===this.props.info.host?/*#__PURE__*/React.createElement(Button,{variant:\"danger\",onClick:this.handleRemove},\"Remove\"):null,/*#__PURE__*/React.createElement(Modal,{show:this.state.show,onHide:this.handleClose},/*#__PURE__*/React.createElement(HostCard,{info:user}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\"},/*#__PURE__*/React.createElement(\"div\",{class:\"info-name\"},\"\\uD83D\\uDE0E Host: \",user.first_name,\" \",user.last_name),user.gender===\"Male\"?/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:\"skyblue\",color:\"white\",width:\"20px\",textAlign:\"center\",borderRadius:\"10%\",marginLeft:\"5px\"}},\"\\u2642\"):null,user.gender===\"Female\"?/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:\"pink\",color:\"white\",width:\"20px\",textAlign:\"center\",borderRadius:\"10%\",marginLeft:\"5px\"}},\"\\u2640\"):null,user.gender===\"Other\"?/*#__PURE__*/React.createElement(\"div\",{style:{backgroundImage:\"linear-gradient(to right, skyblue, pink)\",color:\"white\",width:\"20px\",textAlign:\"center\",borderRadius:\"10%\",marginLeft:\"5px\"}},\"\\u26A5\"):null,/*#__PURE__*/React.createElement(\"div\",{className:\"info\",style:{marginLeft:\"30px\"}},\"\\uD83D\\uDCBB Occupation: \",/*#__PURE__*/React.createElement(\"li\",{style:{marginLeft:\"5px\"}},user.role,\" \",user.institution&&user.role?\"at\":null,\" \",user.institution))),/*#__PURE__*/React.createElement(\"div\",{className:\"info\"},\"\\u2714\\uFE0F Streaming Link: \",/*#__PURE__*/React.createElement(\"a\",{id:\"link\",style:{marginLeft:\"5px\"},target:\"_blank\",rel:\"noopener noreferrer\",href:this.props.info.meeting_link,onClick:this.handleJoin},this.props.info.meeting_link)),/*#__PURE__*/React.createElement(\"div\",{className:\"info\"},\"\\uD83C\\uDFA4 Room description: \",/*#__PURE__*/React.createElement(\"li\",{style:{marginLeft:\"5px\"}},this.props.info.room_description)),/*#__PURE__*/React.createElement(\"div\",{className:\"info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\"},this.props.info.tasks_tags&&this.props.info.tasks_tags.map(function(p){return/*#__PURE__*/React.createElement(\"div\",{className:\"unselected-button\",style:{fontSize:\"small\"}},p);}))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"success\",onClick:this.renderParticipants},this.props.info.participants.length,\" people have joined the room\")),/*#__PURE__*/React.createElement(Modal,{show:this.state.showParticipants,onHide:this.hideParticipants},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true},this.state.showProfile?/*#__PURE__*/React.createElement(\"div\",{className:\"arrow\"},/*#__PURE__*/React.createElement(ProfileCard,{id:this.state.whoseProfile})):null,/*#__PURE__*/React.createElement(\"div\",{style:{overflowY:\"scroll\"}},this.props.info.participants&&this.props.info.participants.map(function(participant){return/*#__PURE__*/React.createElement(\"button\",{className:\"chatbox-section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\"},/*#__PURE__*/React.createElement(\"img\",{src:participant.image!==\"\"?participant.image:ditto,onMouseOver:function onMouseOver(){return _this3.renderProfile(participant.id);},onMouseOut:_this3.hideProfile,style:{width:\"40px\",height:\"40px\"}}),/*#__PURE__*/React.createElement(\"span\",{style:{color:\"black\",fontSize:\"small\"}},participant.name,\" joined the room at \",participant.time)));}))))));}}]);return StreamingCard;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.firebase.auth};};export default connect(mapStateToProps,{removeStreaming:removeStreaming,joinSession:joinSession})(StreamingCard);","map":{"version":3,"sources":["/Users/liu550/Desktop/salon_project/src/components/design/streamingcard.js"],"names":["React","Component","useState","Button","Modal","ModalFooter","Card","firebase","HostCard","ditto","connect","removeStreaming","joinSession","ProfileCard","StreamingCard","props","handleShow","e","preventDefault","setState","show","handleClose","handleRemove","handleJoin","date","Date","time","getFullYear","getMonth","getDate","getHours","getMinutes","info","host","window","open","meeting_link","handleClick","console","log","renderParticipants","showParticipants","hideParticipants","renderProfile","id","showProfile","whoseProfile","hideProfile","state","user","firestore","collection","doc","get","then","data","auth","image","uid","first_name","last_name","gender","backgroundColor","color","width","textAlign","borderRadius","marginLeft","backgroundImage","role","institution","room_description","tasks_tags","map","p","fontSize","participants","length","overflowY","participant","height","name","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react';\nimport '../../styles/card.css';\nimport { Button, Modal, ModalFooter } from 'react-bootstrap';\nimport Card from './card.js';\n\nimport firebase from '../../config/firebaseconfig';\nimport '../component.css';\nimport HostCard from './hostcard.js';\nimport ditto from '../ditto.png';\n\nimport { connect } from 'react-redux';\nimport { removeStreaming } from '../../redux/actions';\nimport { joinSession } from '../../redux/actions';\nimport ProfileCard from '../profilecard.js';\n\n/*\nconst StreamingCard = (props) => {\n\n    const [show, setShow] = useState(false);\n    const handleShow = () => setShow(true);\n    const handleClose = () => setShow(false);\n\n\n\n    const user = firebase.firestore().collection(\"users\").doc(props.info.host);\n\n  return (\n    <div className=\"card-container\">\n      <div className='profile-content'>\n\n      <div>\n          <div>\n            <img src={props.user.image}></img>\n            <Button variant=\"primary\" onClick={handleShow}>Click to learn more about me</Button>\n            <Modal show={show} onClick={handleClose}>\n                <Card info={props.info}></Card>\n                <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={handleClose}>\n                        Close\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n          </div>\n          <div class=\"name\">\n            Host: {props.user.first_name} {props.user.last_name}\n          </div>\n        </div>\n\n    <div>\n        <div>\n          {props.info.meeting_link}\n        </div>\n        <div>\n            {props.info.room_description}\n        </div>\n    </div>\n\n\n        </div>\n      </div>\n\n  );\n}\n\n\nexport default StreamingCard;\n*/\n\n\nclass StreamingCard extends Component {\n  \n  constructor(props){\n    super(props);\n    this.state = {\n      user: \"\",\n      show: false,\n      showProfile: false,\n      showParticipants: false,\n      whoseProfile: false\n    }\n  }\n  \n/*\n  state = {\n    user: \"\",\n    show: false,\n    showProfile: false,\n    showParticipants: false,\n    whoseProfile: false\n  }\n  */\n\n  componentDidMount() {\n    firebase.firestore().collection(\"users\").doc(this.props.info.host)\n    .get()\n    .then((doc) => {\n      this.setState({\n        user: doc.data()\n      })\n    })\n  }\n\n  handleShow = (e) => {\n    e.preventDefault();\n    this.setState({\n      show: true\n    })\n  }\n\n  handleClose = () => {\n    this.setState({\n      show: false\n    })\n  }\n\n  handleRemove = (e) => {\n    e.preventDefault();\n    this.props.removeStreaming();\n  }\n\n  handleJoin = async (e) => {\n    e.preventDefault();\n   \n      const date = new Date();\n      const time = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate() + \" \" + date.getHours() + \":\" + date.getMinutes();\n      this.props.joinSession(this.props.info.host, time);\n    \n    window.open(this.props.info.meeting_link);\n  }\n\n  handleClick = () => {\n    console.log(\"called\");\n    //document.getElementById(\"link\").click();\n  }\n\n  renderParticipants = (e) => {\n    e.preventDefault();\n    this.setState({\n      showParticipants: true\n    })\n  }\n\n  hideParticipants = () => {\n    this.setState({\n      showParticipants: false\n    })\n  }\n\n\n  renderProfile = (id) => {\n      this.setState({\n          showProfile: true,\n          whoseProfile: id\n      })\n  }\n\n  hideProfile = () => {\n      this.setState({\n          showProfile: false\n      })\n  }\n  \n  render() {\n\n    const user = this.state.user;\n    const {auth} = this.props;\n\n    return (\n      <div className=\"card-container\">\n        <div className='profile-content'>\n\n  \n        \n            <div>\n              <img src={user.image ? user.image : ditto}></img>\n              <Button variant=\"success\" onClick={this.handleShow}>👀 More about me</Button> {auth.uid === this.props.info.host ? <Button variant=\"danger\" onClick={this.handleRemove}>Remove</Button> : null}\n              <Modal show={this.state.show} onHide={this.handleClose}>\n                  <HostCard info={user}></HostCard>\n                  </Modal>\n\n            </div>\n\n            <div className=\"form-inline\">\n            <div class=\"info-name\">\n            😎 Host: {user.first_name} {user.last_name}\n            </div>\n\n            {user.gender === \"Male\" ? <div style={{ backgroundColor: \"skyblue\", color: \"white\", width: \"20px\", textAlign: \"center\", borderRadius: \"10%\", marginLeft: \"5px\" }}>♂</div> : null}\n          {user.gender === \"Female\" ? <div style={{ backgroundColor: \"pink\", color: \"white\", width: \"20px\", textAlign: \"center\", borderRadius: \"10%\", marginLeft: \"5px\" }}>♀</div> : null}\n          {user.gender === \"Other\" ? <div style={{ backgroundImage: \"linear-gradient(to right, skyblue, pink)\", color: \"white\", width: \"20px\", textAlign: \"center\", borderRadius: \"10%\", marginLeft: \"5px\" }}>⚥</div> : null}\n\n          <div className=\"info\" style={{ marginLeft: \"30px\" }}>\n          💻 Occupation: <li style={{ marginLeft: \"5px\" }}>{user.role} {user.institution && user.role ? \"at\" : null} {user.institution}</li>\n          </div>\n          </div>\n\n\n          <div className=\"info\">\n          ✔️ Streaming Link: <a id=\"link\" style={{ marginLeft: \"5px\" }} target=\"_blank\" rel=\"noopener noreferrer\" href={this.props.info.meeting_link} onClick={this.handleJoin}>{this.props.info.meeting_link}</a>\n          </div>\n          <div className=\"info\">\n          🎤 Room description: <li style={{ marginLeft: \"5px\" }}>{this.props.info.room_description}</li>\n          </div>\n\n          <div className=\"info\">\n        <div className=\"form-inline\">\n          {this.props.info.tasks_tags && this.props.info.tasks_tags.map((p) => {\n            return(\n              <div className=\"unselected-button\" style={{ fontSize: \"small\" }}>\n                {p}\n              </div>\n            );\n          })}\n        </div>\n        </div>\n\n        <div>\n        <Button variant=\"success\" onClick={this.renderParticipants}>{this.props.info.participants.length} people have joined the room</Button>\n        </div>\n\n        <Modal show={this.state.showParticipants} onHide={this.hideParticipants}>\n          <Modal.Header closeButton>\n          {this.state.showProfile ? <div className=\"arrow\"><ProfileCard id={this.state.whoseProfile}></ProfileCard></div> : null}\n            <div style={{overflowY: \"scroll\"}}>\n              {this.props.info.participants && this.props.info.participants.map((participant) => {\n                return (\n                  <button className=\"chatbox-section\">\n                       <div className=\"form-inline\">\n                          <img src={participant.image !== \"\" ? participant.image : ditto}  onMouseOver={() => this.renderProfile(participant.id)} onMouseOut={this.hideProfile} style={{ width: \"40px\", height: \"40px\" }}></img>\n                          <span style={{ color: \"black\", fontSize: \"small\" }}>{participant.name} joined the room at {participant.time}</span>\n                        </div>\n                  </button>\n                );\n              })}\n            </div>\n          </Modal.Header> \n        </Modal>\n\n\n    \n  \n          </div>\n        </div>\n  \n    );\n  }\n\n\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    auth: state.firebase.auth\n  }\n}\n\nexport default \n  connect(mapStateToProps, {removeStreaming, joinSession})\n(StreamingCard);\n"]},"metadata":{},"sourceType":"module"}