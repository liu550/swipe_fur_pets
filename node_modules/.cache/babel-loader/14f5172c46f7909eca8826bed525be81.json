{"ast":null,"code":"import _toConsumableArray from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/liu550/Desktop/salon_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./component.css';import firebase from'../config/firebaseconfig';import{Container,Navbar}from'react-bootstrap';import Card from'./design/card';import Filter from'./design/filter';import'../styles/waitingroom.css';import{thisTypeAnnotation}from'@babel/types';import NavBar from'./navbar';import ChatBox from'./chatbox.js';import'../styles/card.css';import SignUp from'./signup';import LogIn from'./login';import{Button,Modal}from'react-bootstrap';import MatchingBox from'./matchingbox.js';import MatchingWindow from'./matchingwindow.js';//Redux\nimport{connect}from'react-redux';import{compose}from'redux';import{firestoreConnect}from'react-redux-firebase';import{submitTicket,startMatching,groupMessaging}from'../redux/actions';var personalities=[\"hard-working\",\"helpful/kind/altruistic\",\"outgoing/social\",\"knowledgeable\",\"ambitious\",\"thoughtful\",\"observant\",\"introvert\",\"humble\",\"imaginative\",\"impartial\",\"intelligent\",\"creative\",\"ethics\",\"social justice\",\"insightful/perceptive\",\"energetic\",\"smart\",\"curious\",\"open-minded\",\"meticulous\",\"logics\",\"agreeable\",\"competent\",\"wealth\",\"social influence/recognition\",\"geek\",\"executive\",\"leader\",\"adventurer\",\"thinker\",\"analyst\",\"planner\",\"artist\",\"designer\"];var filters=['Entrepreneurship','Finance/Investing/VC','Business Analysis/Consulting','Software Engineering','Data Analytics/Science','UI/UX Design','Artificial Intelligence','Electrical Engineering','Mechanical Engineering','Biomedical Engineering','Mathematics','Physics','Chemistry','Psychology','Economics','History','Politics','Law','Healthcare','Arts'];var taskfilters=['Startup/Personal Project','Work/Internship','Study','Interview Preparation','Exam Preparation','Reading Books','Research','Brainstorming','Finance/Investment/VC','Business Analysis','Software Engineering','Data Science','UI/UX Design','Artificial Intelligence','Electrical Engineering','Mechanical Engineering','Biomedical Engineering','Mathematics','Physics','Chemistry','Psychology','Economics','History','Politics','Law','Healthcare','Arts'];var WaitingRoom=/*#__PURE__*/function(_Component){_inherits(WaitingRoom,_Component);var _super=_createSuper(WaitingRoom);function WaitingRoom(){var _this;_classCallCheck(this,WaitingRoom);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={filters:[],tasks:[],show:false,showmatching:false,routeguarding:false,description:\"\",reduxtasks:[],personalities:[],genderpreference:\"\",//showmatchingwindow: false,\nshowgroupmessaging:false,currentprofilelist:[],number:0,showmatchingwindow:false,interestFilterVisibility:false,taskFilterVisibility:false,personalityFilterVisibility:false,changeMatchingButton:false,matching:{}};_this.buildList=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(users){var profilelist,i,userprofile;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:profilelist=[];i=0;while(users&&i<users.length){userprofile={id:users[i].id,profile:users[i]};profilelist.push(userprofile);i++;}return _context.abrupt(\"return\",profilelist);case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.clickSignUp=function(e){e.preventDefault();_this.setState({signup:true});};_this.clickLogIn=function(e){e.preventDefault();_this.setState({signup:false});};_this.handleShow=function(e){e.preventDefault();var auth=_this.props.auth;if(!auth.uid){_this.setState({routeguarding:true});}else _this.setState({show:true});};_this.handleClose=function(){_this.setState({show:false});};_this.handleCloseRedirect=function(){_this.setState({routeguarding:false});};_this.handleSubmit=function(e){e.preventDefault();_this.props.submitTicket(_this.state);_this.setState({show:false});};_this.handleChange=function(e){e.stopPropagation();_this.setState(_defineProperty({},e.target.id,e.target.value));};_this.updateReduxTasks=function(e){e.preventDefault();if(e.target.className===\"unselected-button\"){var helper=[].concat(_toConsumableArray(_this.state.reduxtasks),[e.target.id]);_this.setState({reduxtasks:helper});e.target.className=\"selected-button\";}else{var newfilters=_this.state.reduxtasks.filter(function(tag){return tag!==e.target.id;});_this.setState({reduxtasks:newfilters});e.target.className=\"unselected-button\";}};_this.onlyFilters=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var helper,newfilters;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(e.target.className===\"unselected-button\")){_context2.next=7;break;}helper=[].concat(_toConsumableArray(_this.state.filters),[e.target.id]);_this.setState({filters:helper});e.target.className=\"selected-button\";return _context2.abrupt(\"return\",helper);case 7:newfilters=_this.state.filters.filter(function(tag){return tag!==e.target.id;});_this.setState({filters:newfilters});e.target.className=\"unselected-button\";return _context2.abrupt(\"return\",newfilters);case 11:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();_this.filtersUpdateList=function(newfilters){var users=_this.props.users;var newprofilelist=[];var i=0;while(i<users.length){if(_this.state.filters.every(function(t){return users&&users[i].areas_of_interest&&users[i].areas_of_interest.includes(t);})&&_this.state.tasks.every(function(t){return users[i].tasks_tags&&users[i].tasks_tags.includes(t);})&&_this.state.personalities.every(function(t){return users[i].personalities&&users[i].personalities.includes(t);})){newprofilelist.push({id:users[i].id,profile:users[i]});}i++;}_this.setState({currentprofilelist:newprofilelist});};_this.updateFilters=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_this.onlyFilters(e).then(function(newfilters){_this.filtersUpdateList(newfilters);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();_this.onlyTasks=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var helper,newfilters;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(e.target.className===\"unselected-button\")){_context4.next=7;break;}helper=[].concat(_toConsumableArray(_this.state.tasks),[e.target.id]);_this.setState({tasks:helper});e.target.className=\"selected-button\";return _context4.abrupt(\"return\",helper);case 7:newfilters=_this.state.tasks.filter(function(tag){return tag!==e.target.id;});_this.setState({tasks:newfilters});e.target.className=\"unselected-button\";return _context4.abrupt(\"return\",newfilters);case 11:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();_this.tasksUpdateList=function(newtasks){var users=_this.props.users;var newprofilelist=[];var i=0;while(i<users.length){if(newtasks.every(function(t){return users[i].tasks_tags&&users[i].tasks_tags.includes(t);})&&_this.state.filters.every(function(t){return users[i].areas_of_interest&&users[i].areas_of_interest.includes(t);})){newprofilelist.push({id:users[i].id,profile:users[i]});}i++;}_this.setState({currentprofilelist:newprofilelist});};_this.updateTasks=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();return _context5.abrupt(\"return\",_this.onlyTasks(e).then(function(newtasks){_this.filtersUpdateList(newtasks);}));case 2:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}();_this.onlyPersonalities=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e){var helper,newfilters;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(e.target.className===\"unselected-button\")){_context6.next=7;break;}helper=[].concat(_toConsumableArray(_this.state.personalities),[e.target.id]);_this.setState({personalities:helper});e.target.className=\"selected-button\";return _context6.abrupt(\"return\",helper);case 7:newfilters=_this.state.personalities.filter(function(tag){return tag!==e.target.id;});_this.setState({personalities:newfilters});e.target.className=\"unselected-button\";return _context6.abrupt(\"return\",newfilters);case 11:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref6.apply(this,arguments);};}();_this.updatePersonalities=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:e.preventDefault();return _context7.abrupt(\"return\",_this.onlyPersonalities(e).then(function(newtasks){_this.filtersUpdateList(newtasks);}));case 2:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref7.apply(this,arguments);};}();_this.showMatching=function(e){e.preventDefault();if(!_this.props.auth.uid){_this.setState({routeguarding:true});}else{_this.setState({showmatching:true});}};_this.handleMatching=function(e){e.preventDefault();if(_this.state.genderpreference!==\"\"){_this.props.startMatching(_this.props.auth.uid,_this.props.profile,_this.props.profile.gender,_this.state.genderpreference);_this.setState({showmatching:false,showmatchingwindow:true});}};_this.closeMatching=function(){_this.setState({showmatching:false});};_this.closeMatchingWindow=function(){_this.setState({showmatchingwindow:false});};_this.showGroupMessaging=function(e){e.preventDefault();if(!_this.props.auth.uid){_this.setState({routeguarding:true});}else _this.setState({showgroupmessaging:true});};_this.closeMessaging=function(){_this.setState({showgroupmessaging:false});};_this.createMessage=function(time){var message={};message={time:time,from:_this.props.auth.uid,content:document.getElementById(\"message\").value};return message;};_this.handleMessaging=function(e){e.preventDefault();if(_this.state.number!==0){var date=new Date();var time=date.getFullYear()+\"-\"+(date.getMonth()+1)+\"-\"+date.getDate()+\" \"+date.getHours()+\":\"+date.getMinutes();var message=_this.createMessage(time);_this.props.groupMessaging(_this.state.currentprofilelist,_this.state.number,message,_this.props.profile);}};_this.showInterestFilter=function(e){e.preventDefault();_this.setState({interestFilterVisibility:true});};_this.closeInterestFilter=function(){_this.setState({interestFilterVisibility:false});};_this.showTaskFilter=function(e){e.preventDefault();_this.setState({taskFilterVisibility:true});};_this.closeTaskFilter=function(){_this.setState({taskFilterVisibility:false});};_this.showPersonalityFilter=function(e){e.preventDefault();_this.setState({personalityFilterVisibility:true});};_this.closePersonalityFilter=function(){_this.setState({personalityFilterVisibility:false});};_this.handleTryAgain=function(e){e.preventDefault();_this.setState({showmatchingwindow:false,showmatching:true});};_this.changeMatching=function(){document.getElementById(\"matching-button\").className=\"hovered-buttons\";_this.setState({changeMatchingButton:true});};_this.unchangeMatching=function(){document.getElementById(\"matching-button\").className=\"initial-buttons\";_this.setState({changeMatchingButton:false});};_this.changeMessaging=function(){document.getElementById(\"messaging-button\").className=\"hovered-buttons\";_this.setState({changeMessagingButton:true});};_this.unchangeMessaging=function(){document.getElementById(\"messaging-button\").className=\"initial-buttons\";_this.setState({changeMessagingButton:false});};return _this;}_createClass(WaitingRoom,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;/*\n      setTimeout(() => {\n      if (localStorage.getItem(\"matching\") === \"true\") {\n        if (localStorage.getItem(\"pool\") === \"false\" ) {\n          firebase.firestore().collection(\"matching\").doc(\"seekers\").update({\n            matching_seekers: firebase.firestore.FieldValue.arrayRemove({id: this.props.auth.uid, gender: localStorage.getItem(\"gender\"), gender_preference: localStorage.getItem(\"genderpreference\")})\n          })\n        }\n        else {\n          firebase.firestore().collection(\"matching\").doc(\"pool\").get()\n          .then((doc) => {\n            const found = doc.data().matching_pool.find(element => element.id === this.props.auth.uid);\n            firebase.firestore().collection(\"matching\").doc(\"pool\").update({\n              matching_pool: firebase.firestore.FieldValue.arrayRemove(found)\n            })\n          })\n        }\n        localStorage.setItem(\"matching\", false);\n      }\n      }, 1000)\n    */setTimeout(function(){if(localStorage.getItem(\"matching\")===\"true\"){if(localStorage.getItem(\"pool\")===\"false\"){firebase.firestore().collection(\"matching\").doc(\"seekers\").collection(\"matching_seekers\").doc(_this2.props.auth.uid).delete();firebase.firestore().collection(\"matching\").doc(\"seekers\").update({count:firebase.firestore.FieldValue.increment(-1)});}else{firebase.firestore().collection(\"matching\").doc(\"seekers\").collection(\"matching_pool\").doc(_this2.props.auth.uid).delete();firebase.firestore().collection(\"matching\").doc(\"pool\").update({count:firebase.firestore.FieldValue.increment(-1)});}localStorage.setItem(\"matching\",false);}},1000);var _this$props=this.props,users=_this$props.users,profile=_this$props.profile;this.buildList(users).then(function(profilelist){_this2.setState({currentprofilelist:profilelist//showmatchingwindow: true\n});});this.setState({description:profile.tasks_description,reduxtasks:profile.tasks_tags});}/*\n    deleteMatching = () => {\n      console.log(\"enter this part\");\n      if (localStorage.getItem(\"matching\") === \"true\") {\n        console.log(localStorage.getItem(\"pool\"));\n        if (localStorage.getItem(\"pool\") === \"false\" ) {\n          console.log(this.props.auth.uid);\n          firebase.firestore().collection(\"matching\").doc(\"seekers\").update({\n            matching_seekers: firebase.firestore.FieldValue.arrayRemove({id: this.props.auth.uid, gender: localStorage.getItem(\"gender\"), gender_preference: localStorage.getItem(\"genderpreference\")})\n          })\n        }\n        else {\n          firebase.firestore().collection(\"matching\").doc(\"pool\").get()\n          .then((doc) => {\n            const found = doc.data().matching_pool.find(element => element.id === this.props.auth.uid);\n            firebase.firestore().collection(\"matching\").doc(\"pool\").update({\n              matching_pool: firebase.firestore.FieldValue.arrayRemove(found)\n            })\n          })\n        }\n        localStorage.setItem(\"matching\", false);\n      }\n    }\n\n\n    setupBeforeUnloadListener() {\n      window.addEventListener(\"beforeunload\", (ev) => {\n        ev.preventDefault();\n        console.log(\"enter this part\");\n        return this.deleteMatching();\n      });\n    }\n    */},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevprops,prevstate){/*\n      console.log(prevstate.matching);\n      if (prevprops.matching !== this.props.matching) {\n        this.setState({\n          matching: this.props.matching\n        })\n      }\n      if (prevstate.matching.going === true) {\n        if (prevstate.matching.pool === false) {\n          firebase.firestore().collection(\"matching\").doc(\"seekers\").update({\n            matching_seekers: firebase.firestore.FieldValue.arrayRemove(prevstate.matching.map)\n          })\n        }\n        else {\n          firebase.firestore().collection(\"matching\").doc(\"pool\").get()\n          .then((doc) => {\n            const pool = doc.data().matching_pool;\n            const found = pool.find(element => element.id === this.props.auth.uid);\n            const index = pool.indexOf(found);\n            if (index > -1) {\n              pool.splice(index, 1);\n            }\n            firebase.firestore().collection(\"matching\").doc(\"pool\").update({\n              matching_pool: pool\n            })\n          })\n        }\n      }\n      */if(prevprops.profile!==this.props.profile){var _this$props2=this.props,users=_this$props2.users,profile=_this$props2.profile;this.setState({description:profile.tasks_description,reduxtasks:profile.tasks_tags});}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(){var _this$props3=this.props,users=_this$props3.users,profile=_this$props3.profile;var profilelist=[];users&&users.map(function(user){var userprofile={id:user.id,profile:user};profilelist.push(userprofile);});this.setState({currentprofilelist:profilelist});}/*\n    shouldComponentUpdate(nextProps, nextState) {\n      return nextProps.isFavourite != this.props.isFavourite;\n    }\n    */ /*\n    updateFilters = (e) => {\n      e.preventDefault();\n     if (e.target.className === \"unselected-button\") {\n      const helper = this.state.filters;\n      helper.push(e.target.id);\n      this.setState({ filters : helper });\n      e.target.className = \"selected-button\";\n     }\n      else {\n        const newfilters = this.state.filters.filter(tag => tag !== e.target.id);\n        this.setState({ filters : newfilters });\n        e.target.className = \"unselected-button\";\n      }\n    }\n    */},{key:\"renderCards\",/*\n    renderCards(index, users) {\n      let card = users[index];\n      let cardid = card.id;\n\n      if(this.state.filters.length === 0 && this.state.tasks.length === 0) {\n        return (\n          <Card info={card} id={cardid}/>\n        );\n      }\n      else if (this.state.filters.length !== 0 && this.state.tasks.length === 0) {\n        if (this.state.filters.every(t => card.areas_of_interest && card.areas_of_interest.includes(t))) {\n          return (\n            <Card info={card} id={cardid}/>\n          )\n        }\n      }\n      else if (this.state.filters.length !== 0 && this.state.tasks.length === 0) {\n        if (this.state.filters.every(t => card.areas_of_interest && card.areas_of_interest.includes(t))) {\n          return (\n            <Card info={card} id={cardid}/>\n          )\n        }\n      }\n      else if (this.state.filters.length === 0 && this.state.tasks.length !== 0) {\n        if (this.state.tasks.every(t => card.tasks_tags && card.tasks_tags.includes(t))) {\n          return (\n            <Card info={card} id={cardid}/>\n          )\n        }\n      }\n      else if (this.state.filters.length !== 0 && this.state.tasks.length !== 0) {\n        if (this.state.filters.every(t => card.areas_of_interest && card.areas_of_interest.includes(t)) && this.state.tasks.every(t => card.tasks_tags && card.tasks_tags.includes(t))) {\n        return (\n          <Card info={card} id={cardid}/>\n        );\n        }\n      } else {\n        return '';\n      }\n    }\n    */value:function renderCards(index,users){var card=users[index];var cardid=card.id;console.log(card.image);if(cardid!==\"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\"&&this.state.filters.every(function(t){return card.areas_of_interest&&card.areas_of_interest.includes(t);})&&this.state.tasks.every(function(t){return card.tasks_tags&&card.tasks_tags.includes(t);})&&this.state.personalities.every(function(t){return card.personalities&&card.personalities.includes(t);})){return/*#__PURE__*/React.createElement(Card,{info:card,id:cardid});}else{return'';}}},{key:\"render\",value:function render(){var _this3=this;var _this$props4=this.props,auth=_this$props4.auth,users=_this$props4.users,profile=_this$props4.profile,loading=_this$props4.loading,sent=_this$props4.sent,buddy=_this$props4.buddy,chatid=_this$props4.chatid,showmatchingwindow=_this$props4.showmatchingwindow;var profilelist=[];var founderprofile;if(users){var founder=users.find(function(element){return element.id===\"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\";});founderprofile=/*#__PURE__*/React.createElement(Card,{info:founder,id:\"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\"});}var buttonStyle={height:\"50px\",width:\"500px\",margin:\"45px\",backgroundColor:'#fd9535',textAlign:'center',color:\"#fff\",fontSize:\"16px\",shape:\"circle\",fontWeight:\"bold\"};var box;if(loading===true){box=/*#__PURE__*/React.createElement(\"div\",{class:\"loader\"});}else{if(this.props.buddy!==\"\"){box=/*#__PURE__*/React.createElement(MatchingWindow,{chat:chatid,buddy:buddy,close:this.closeMatchingWindow});}else{box=/*#__PURE__*/React.createElement(\"div\",{style:{position:\"absolute\",left:\"35%\",top:\"35%\",border:\"1px solid\",backgroundColor:\"white\",width:\"550px\"}},/*#__PURE__*/React.createElement(\"button\",{style:{float:\"right\",backgroundColor:\"white\",color:\"black\",border:\"0\",padding:\"0\"},onClick:this.closeMatchingWindow},\"x\"),/*#__PURE__*/React.createElement(\"span\",{style:{marginTop:\"15px\"}},\"Sorry we cannot help you find a study/work buddy currently \\uD83D\\uDE16\"),/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\",style:{float:\"right\"},onClick:this.handleTryAgain},\"Try again?\"));}}return/*#__PURE__*/React.createElement(\"div\",null,auth.uid||auth.isEmpty&&auth.isLoaded?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(NavBar,null),auth.uid?/*#__PURE__*/React.createElement(\"div\",{className:\"chatbox-header\"},/*#__PURE__*/React.createElement(ChatBox,{roomid:auth.uid})):null,/*#__PURE__*/React.createElement(Container,{className:\"background\",fluid:true,style:{zIndex:\"-1\",alignItems:\"center\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\",style:{position:\"absolute\",top:\"15%\"}},/*#__PURE__*/React.createElement(Button,{className:\"update-button\",onClick:this.handleShow,style:{fontSize:\"large\",fontFamily:\"Comic Sans MS, cursive, sans-serif\"}},\"Update your tasks here! \\uD83E\\uDD17\"),/*#__PURE__*/React.createElement(\"div\",null,this.state.changeMatchingButton?/*#__PURE__*/React.createElement(\"span\",{className:\"matching-button\"},\"Randomly find a study/work buddy instantly\"):null,/*#__PURE__*/React.createElement(Button,{id:\"matching-button\",className:\"initial-buttons\",onMouseOver:this.changeMatching,onMouseLeave:this.unchangeMatching,onClick:this.showMatching,style:{fontSize:\"large\",fontFamily:\"Comic Sans MS, cursive, sans-serif\"}},\"\\uD83C\\uDFB2\"))),/*#__PURE__*/React.createElement(Modal,{show:this.state.showgroupmessaging,onHide:this.closeMessaging},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleMessaging},/*#__PURE__*/React.createElement(\"span\",null,\"Select a few tags on the page and send your message to up to 3 random users that have the tags in their profiles\"),/*#__PURE__*/React.createElement(\"textarea\",{id:\"message\",placeholder:\"Hi there...\",required:true}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"1\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"number\",value:1,onChange:this.handleChange,checked:this.state.number===\"1\"}),/*#__PURE__*/React.createElement(\"label\",null,\"2\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"number\",value:2,onChange:this.handleChange,checked:this.state.number===\"2\"}),/*#__PURE__*/React.createElement(\"label\",null,\"3\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"number\",value:3,onChange:this.handleChange,checked:this.state.number===\"3\"})),/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\"},\"Send\")),loading?/*#__PURE__*/React.createElement(\"div\",{class:\"loader\"}):null,sent===1?/*#__PURE__*/React.createElement(\"span\",null,\"Message sent!\"):null,sent===2?/*#__PURE__*/React.createElement(\"span\",null,\"Sorry there are not enough users that satisfy the criteria, but the message has been sent to all the users if there are any! \\uD83D\\uDE0B\"):null)),/*#__PURE__*/React.createElement(Modal,{show:this.state.showmatching,onHide:this.closeMatching},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleMatching},\"Match me with:\",/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Male only\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"genderpreference\",value:\"Male\",onChange:this.handleChange,checked:this.state.genderpreference===\"Male\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Female only\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"genderpreference\",value:\"Female\",onChange:this.handleChange,checked:this.state.genderpreference===\"Female\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"Other only\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"genderpreference\",value:\"Other\",onChange:this.handleChange,checked:this.state.genderpreference===\"Other\"})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"I don't care \\uD83D\\uDE22\"),/*#__PURE__*/React.createElement(\"input\",{type:\"radio\",id:\"genderpreference\",value:\"None\",onChange:this.handleChange,checked:this.state.genderpreference===\"None\"})),/*#__PURE__*/React.createElement(Button,{variant:\"success\",type:\"submit\"},\"Start matching\")))),this.state.showmatchingwindow?box:null,/*#__PURE__*/React.createElement(Modal,{show:this.state.show,onHide:this.handleClose},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true}),/*#__PURE__*/React.createElement(Modal.Body,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"span\",null,\"Describe your tasks today!\"),/*#__PURE__*/React.createElement(\"textarea\",{id:\"description\",onChange:this.handleChange,value:this.state.description,required:true}),/*#__PURE__*/React.createElement(\"span\",null,\"Select a few tags:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\"},taskfilters.map(function(filter){return/*#__PURE__*/React.createElement(\"div\",{className:_this3.state.reduxtasks&&_this3.state.reduxtasks.includes(filter)?\"selected-button\":\"unselected-button\",id:filter,onClick:_this3.updateReduxTasks},filter);})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"success\"},\"Submit\")))),/*#__PURE__*/React.createElement(Modal,{show:this.state.routeguarding,onHide:this.handleCloseRedirect},/*#__PURE__*/React.createElement(Modal.Header,{closeButton:true}),/*#__PURE__*/React.createElement(Modal.Body,null,\"Sign up to create a profile so that other users can know more about you!\\uD83D\\uDE0A\")),/*#__PURE__*/React.createElement(Container,{fluid:true,style:{position:\"absolute\",top:\"25%\",marginLeft:\"70px\",marginBottom:\"20px\",display:\"flex\",alignItems:\"center\",zIndex:\"-1\"}},/*#__PURE__*/React.createElement(\"span\",{style:{fontFamily:\"Lucida Console, Monaco, monospace\",fontSize:\"large\"}},\"Filter by: \"),/*#__PURE__*/React.createElement(Button,{variant:\"success\",style:{fontFamily:\"Lucida Console, Monaco, monospace\",fontSize:\"large\",marginRight:\"10px\"},onClick:this.showInterestFilter},\"\\uD83D\\uDC9B Interests\"),/*#__PURE__*/React.createElement(Modal,{id:\"interestfilter\",show:this.state.interestFilterVisibility,onHide:this.closeInterestFilter},/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\",style:{margin:\"5px \"},id:\"filters\"},filters.map(function(filter){return/*#__PURE__*/React.createElement(\"div\",{className:_this3.state.filters&&_this3.state.filters.includes(filter)?\"selected-button\":\"unselected-button\",id:filter,onClick:_this3.updateFilters},filter);}))),/*#__PURE__*/React.createElement(Button,{variant:\"success\",style:{fontFamily:\"Lucida Console, Monaco, monospace\",fontSize:\"large\",marginRight:\"10px\"},onClick:this.showPersonalityFilter},\"\\uD83D\\uDC7B Values\"),/*#__PURE__*/React.createElement(Modal,{id:\"interestfilter\",show:this.state.personalityFilterVisibility,onHide:this.closePersonalityFilter},/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\",style:{margin:\"5px \"},id:\"filters\"},personalities.map(function(filter){return/*#__PURE__*/React.createElement(\"div\",{className:_this3.state.personalities&&_this3.state.personalities.includes(filter)?\"selected-button\":\"unselected-button\",id:filter,onClick:_this3.updatePersonalities},filter);}))),/*#__PURE__*/React.createElement(Button,{variant:\"success\",style:{fontFamily:\"Lucida Console, Monaco, monospace\",fontSize:\"large\",marginRight:\"10px\"},onClick:this.showTaskFilter},\"\\uD83C\\uDFF7 Tasks\"),/*#__PURE__*/React.createElement(Modal,{id:\"interestfilter\",show:this.state.taskFilterVisibility,onHide:this.closeTaskFilter},/*#__PURE__*/React.createElement(\"div\",{className:\"form-inline\",style:{margin:\"5px \"},id:\"filters\"},taskfilters.map(function(filter){return/*#__PURE__*/React.createElement(\"div\",{className:_this3.state.tasks&&_this3.state.tasks.includes(filter)?\"selected-button\":\"unselected-button\",id:filter,onClick:_this3.updateTasks},filter);})))),/*#__PURE__*/React.createElement(\"div\",{style:{position:\"absolute\",top:\"30%\",zIndex:\"-1\"}},/*#__PURE__*/React.createElement(\"div\",{id:\"cards\"},founderprofile,users&&users.map(function(card,index,users){return _this3.renderCards(index,users,profilelist);}))))):/*#__PURE__*/React.createElement(\"div\",{className:\"loader\"}));}}]);return WaitingRoom;}(Component);var mapStateToProps=function mapStateToProps(state){console.log('waiting cponent',state.firestore);return{users:state.firestore.ordered.users,auth:state.firebase.auth,profile:state.firebase.profile,loading:state.auth.loading,sent:state.auth.sent,buddy:state.auth.buddy,chatid:state.auth.chatid,matching:state.auth.matching,showmatchingwindow:state.auth.showmatchingwindow};};export default compose(connect(mapStateToProps,{submitTicket:submitTicket,startMatching:startMatching,groupMessaging:groupMessaging}),firestoreConnect([{collection:'users'}]))(WaitingRoom);/*\n            <div>\n            {this.state.changeMessagingButton ? <span className=\"messaging-button\">Send a message to random people</span> : null}\n            <Button id=\"messaging-button\" className=\"initial-buttons\" onMouseOver={this.changeMessaging} onMouseLeave={this.unchangeMessaging} onClick={this.showGroupMessaging} style={{ fontSize: \"large\", fontFamily: \"Comic Sans MS, cursive, sans-serif\" }}>💌</Button>\n            </div>\n            */","map":{"version":3,"sources":["/Users/liu550/Desktop/salon_project/src/components/waitingroom.js"],"names":["React","Component","firebase","Container","Navbar","Card","Filter","thisTypeAnnotation","NavBar","ChatBox","SignUp","LogIn","Button","Modal","MatchingBox","MatchingWindow","connect","compose","firestoreConnect","submitTicket","startMatching","groupMessaging","personalities","filters","taskfilters","WaitingRoom","state","tasks","show","showmatching","routeguarding","description","reduxtasks","genderpreference","showgroupmessaging","currentprofilelist","number","showmatchingwindow","interestFilterVisibility","taskFilterVisibility","personalityFilterVisibility","changeMatchingButton","matching","buildList","users","profilelist","i","length","userprofile","id","profile","push","clickSignUp","e","preventDefault","setState","signup","clickLogIn","handleShow","auth","props","uid","handleClose","handleCloseRedirect","handleSubmit","handleChange","stopPropagation","target","value","updateReduxTasks","className","helper","newfilters","filter","tag","onlyFilters","filtersUpdateList","newprofilelist","every","t","areas_of_interest","includes","tasks_tags","updateFilters","then","onlyTasks","tasksUpdateList","newtasks","updateTasks","onlyPersonalities","updatePersonalities","showMatching","handleMatching","gender","closeMatching","closeMatchingWindow","showGroupMessaging","closeMessaging","createMessage","time","message","from","content","document","getElementById","handleMessaging","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","showInterestFilter","closeInterestFilter","showTaskFilter","closeTaskFilter","showPersonalityFilter","closePersonalityFilter","handleTryAgain","changeMatching","unchangeMatching","changeMessaging","changeMessagingButton","unchangeMessaging","setTimeout","localStorage","getItem","firestore","collection","doc","delete","update","count","FieldValue","increment","setItem","tasks_description","prevprops","prevstate","map","user","index","card","cardid","console","log","image","loading","sent","buddy","chatid","founderprofile","founder","find","element","buttonStyle","height","width","margin","backgroundColor","textAlign","color","fontSize","shape","fontWeight","box","position","left","top","border","float","padding","marginTop","isEmpty","isLoaded","zIndex","alignItems","fontFamily","marginLeft","marginBottom","display","marginRight","renderCards","mapStateToProps","ordered"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './component.css';\nimport firebase from '../config/firebaseconfig';\nimport { Container, Navbar } from 'react-bootstrap';\nimport Card from './design/card';\nimport Filter from './design/filter';\nimport '../styles/waitingroom.css';\nimport { thisTypeAnnotation } from '@babel/types';\nimport NavBar from './navbar';\nimport ChatBox from './chatbox.js';\n\nimport '../styles/card.css';\n\nimport SignUp from './signup';\nimport LogIn from './login';\nimport { Button, Modal } from 'react-bootstrap';\nimport MatchingBox from './matchingbox.js';\nimport MatchingWindow from './matchingwindow.js';\n\n//Redux\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { firestoreConnect } from 'react-redux-firebase';\nimport { submitTicket, startMatching, groupMessaging } from '../redux/actions';\n\n\nconst personalities = [\n    \"hard-working\",\n    \"helpful/kind/altruistic\",\n    \"outgoing/social\",\n    \"knowledgeable\",\n    \"ambitious\",\n    \"thoughtful\",\n    \"observant\",\n    \"introvert\",\n    \"humble\",\n    \"imaginative\",\n    \"impartial\",\n    \"intelligent\",\n    \"creative\",\n    \"ethics\",\n    \"social justice\",\n    \"insightful/perceptive\",\n    \"energetic\",\n    \"smart\",\n    \"curious\",\n    \"open-minded\",\n    \"meticulous\",\n    \"logics\",\n    \"agreeable\",\n    \"competent\",\n    \"wealth\",\n    \"social influence/recognition\",\n    \"geek\",\n    \"executive\",\n    \"leader\",\n    \"adventurer\",\n    \"thinker\",\n    \"analyst\",\n    \"planner\",\n    \"artist\",\n    \"designer\"\n]\n\nconst filters = [\n  'Entrepreneurship',\n  'Finance/Investing/VC',\n  'Business Analysis/Consulting',\n  'Software Engineering',\n  'Data Analytics/Science',\n  'UI/UX Design',\n  'Artificial Intelligence',\n  'Electrical Engineering',\n  'Mechanical Engineering',\n  'Biomedical Engineering',\n  'Mathematics',\n  'Physics',\n  'Chemistry',\n  'Psychology',\n  'Economics',\n  'History',\n  'Politics',\n  'Law',\n  'Healthcare',\n  'Arts'\n];\n\nconst taskfilters = [\n  'Startup/Personal Project',\n  'Work/Internship',\n  'Study',\n  'Interview Preparation',\n  'Exam Preparation',\n  'Reading Books',\n  'Research',\n  'Brainstorming',\n  'Finance/Investment/VC',\n  'Business Analysis',\n  'Software Engineering',\n  'Data Science',\n  'UI/UX Design',\n  'Artificial Intelligence',\n  'Electrical Engineering',\n  'Mechanical Engineering',\n  'Biomedical Engineering',\n  'Mathematics',\n  'Physics',\n  'Chemistry',\n  'Psychology',\n  'Economics',\n  'History',\n  'Politics',\n  'Law',\n  'Healthcare',\n  'Arts'\n];\n\n\n  \n  class WaitingRoom extends Component {\n  \n    state = {\n      filters: [],\n      tasks: [],\n      show: false,\n      showmatching: false,\n      routeguarding: false,\n      description: \"\",\n      reduxtasks: [],\n      personalities: [],\n      genderpreference: \"\",\n      //showmatchingwindow: false,\n      showgroupmessaging: false,\n      currentprofilelist: [],\n      number: 0,\n      showmatchingwindow: false,\n      interestFilterVisibility: false,\n      taskFilterVisibility: false,\n      personalityFilterVisibility: false,\n      changeMatchingButton: false,\n      matching: {}\n    }\n\n    buildList = async (users) => {\n      var profilelist = [];\n      var i = 0;\n      while (users && i < users.length) {\n        const userprofile = { id: users[i].id, profile: users[i]};\n        profilelist.push(userprofile);\n        i++;\n      }\n      return profilelist;\n    }\n\n    componentDidMount() {\n/*\n      setTimeout(() => {\n      if (localStorage.getItem(\"matching\") === \"true\") {\n        if (localStorage.getItem(\"pool\") === \"false\" ) {\n          firebase.firestore().collection(\"matching\").doc(\"seekers\").update({\n            matching_seekers: firebase.firestore.FieldValue.arrayRemove({id: this.props.auth.uid, gender: localStorage.getItem(\"gender\"), gender_preference: localStorage.getItem(\"genderpreference\")})\n          })\n        }\n        else {\n          firebase.firestore().collection(\"matching\").doc(\"pool\").get()\n          .then((doc) => {\n            const found = doc.data().matching_pool.find(element => element.id === this.props.auth.uid);\n            firebase.firestore().collection(\"matching\").doc(\"pool\").update({\n              matching_pool: firebase.firestore.FieldValue.arrayRemove(found)\n            })\n          })\n        }\n        localStorage.setItem(\"matching\", false);\n      }\n      }, 1000)\n    */\n\n   setTimeout(() => {\n    if (localStorage.getItem(\"matching\") === \"true\") {\n      if (localStorage.getItem(\"pool\") === \"false\" ) {\n        firebase.firestore().collection(\"matching\").doc(\"seekers\").collection(\"matching_seekers\").doc(this.props.auth.uid).delete();\n        firebase.firestore().collection(\"matching\").doc(\"seekers\").update({\n          count: firebase.firestore.FieldValue.increment(-1)\n        })\n      }\n      else {\n        firebase.firestore().collection(\"matching\").doc(\"seekers\").collection(\"matching_pool\").doc(this.props.auth.uid).delete();\n        firebase.firestore().collection(\"matching\").doc(\"pool\").update({\n          count: firebase.firestore.FieldValue.increment(-1)\n        })\n      }\n      localStorage.setItem(\"matching\", false);\n    }\n    }, 1000)\n  \n      const { users, profile } = this.props;\n      this.buildList(users)\n      .then((profilelist) => {\n        this.setState({\n          currentprofilelist: profilelist,\n          //showmatchingwindow: true\n        })\n      });\n      this.setState({\n        description: profile.tasks_description,\n        reduxtasks: profile.tasks_tags,\n      })\n    }\n\n    /*\n    deleteMatching = () => {\n      console.log(\"enter this part\");\n      if (localStorage.getItem(\"matching\") === \"true\") {\n        console.log(localStorage.getItem(\"pool\"));\n        if (localStorage.getItem(\"pool\") === \"false\" ) {\n          console.log(this.props.auth.uid);\n          firebase.firestore().collection(\"matching\").doc(\"seekers\").update({\n            matching_seekers: firebase.firestore.FieldValue.arrayRemove({id: this.props.auth.uid, gender: localStorage.getItem(\"gender\"), gender_preference: localStorage.getItem(\"genderpreference\")})\n          })\n        }\n        else {\n          firebase.firestore().collection(\"matching\").doc(\"pool\").get()\n          .then((doc) => {\n            const found = doc.data().matching_pool.find(element => element.id === this.props.auth.uid);\n            firebase.firestore().collection(\"matching\").doc(\"pool\").update({\n              matching_pool: firebase.firestore.FieldValue.arrayRemove(found)\n            })\n          })\n        }\n        localStorage.setItem(\"matching\", false);\n      }\n    }\n\n\n    setupBeforeUnloadListener() {\n      window.addEventListener(\"beforeunload\", (ev) => {\n        ev.preventDefault();\n        console.log(\"enter this part\");\n        return this.deleteMatching();\n      });\n    }\n    */\n\n    componentDidUpdate(prevprops, prevstate) {\n      /*\n      console.log(prevstate.matching);\n      if (prevprops.matching !== this.props.matching) {\n        this.setState({\n          matching: this.props.matching\n        })\n      }\n      if (prevstate.matching.going === true) {\n        if (prevstate.matching.pool === false) {\n          firebase.firestore().collection(\"matching\").doc(\"seekers\").update({\n            matching_seekers: firebase.firestore.FieldValue.arrayRemove(prevstate.matching.map)\n          })\n        }\n        else {\n          firebase.firestore().collection(\"matching\").doc(\"pool\").get()\n          .then((doc) => {\n            const pool = doc.data().matching_pool;\n            const found = pool.find(element => element.id === this.props.auth.uid);\n            const index = pool.indexOf(found);\n            if (index > -1) {\n              pool.splice(index, 1);\n            }\n            firebase.firestore().collection(\"matching\").doc(\"pool\").update({\n              matching_pool: pool\n            })\n          })\n        }\n      }\n      */\n      if (prevprops.profile !== this.props.profile) {\n        const { users, profile } = this.props;\n        this.setState({\n          description: profile.tasks_description,\n          reduxtasks: profile.tasks_tags,\n        })\n      }\n    }\n\n    componentWillReceiveProps() {\n      const { users, profile } = this.props;\n      var profilelist = [];\n      users && users.map((user) => {\n        const userprofile = { id: user.id, profile: user};\n        profilelist.push(userprofile);\n      })\n      this.setState({\n        currentprofilelist: profilelist,\n      });\n    }\n/*\n    shouldComponentUpdate(nextProps, nextState) {\n      return nextProps.isFavourite != this.props.isFavourite;\n    }\n    */\n    \n    /*\n    updateFilters = (e) => {\n      e.preventDefault();\n     if (e.target.className === \"unselected-button\") {\n      const helper = this.state.filters;\n      helper.push(e.target.id);\n      this.setState({ filters : helper });\n      e.target.className = \"selected-button\";\n     }\n      else {\n        const newfilters = this.state.filters.filter(tag => tag !== e.target.id);\n        this.setState({ filters : newfilters });\n        e.target.className = \"unselected-button\";\n      }\n    }\n    */\n\n    clickSignUp = (e) => {\n      e.preventDefault();\n      this.setState({ signup: true });\n    }\n\n    clickLogIn = (e) => {\n      e.preventDefault();\n      this.setState({ signup : false });\n    }\n \n/*\n    renderCards(index, users) {\n      let card = users[index];\n      let cardid = card.id;\n\n      if(this.state.filters.length === 0 && this.state.tasks.length === 0) {\n        return (\n          <Card info={card} id={cardid}/>\n        );\n      }\n      else if (this.state.filters.length !== 0 && this.state.tasks.length === 0) {\n        if (this.state.filters.every(t => card.areas_of_interest && card.areas_of_interest.includes(t))) {\n          return (\n            <Card info={card} id={cardid}/>\n          )\n        }\n      }\n      else if (this.state.filters.length !== 0 && this.state.tasks.length === 0) {\n        if (this.state.filters.every(t => card.areas_of_interest && card.areas_of_interest.includes(t))) {\n          return (\n            <Card info={card} id={cardid}/>\n          )\n        }\n      }\n      else if (this.state.filters.length === 0 && this.state.tasks.length !== 0) {\n        if (this.state.tasks.every(t => card.tasks_tags && card.tasks_tags.includes(t))) {\n          return (\n            <Card info={card} id={cardid}/>\n          )\n        }\n      }\n      else if (this.state.filters.length !== 0 && this.state.tasks.length !== 0) {\n        if (this.state.filters.every(t => card.areas_of_interest && card.areas_of_interest.includes(t)) && this.state.tasks.every(t => card.tasks_tags && card.tasks_tags.includes(t))) {\n        return (\n          <Card info={card} id={cardid}/>\n        );\n        }\n      } else {\n        return '';\n      }\n    }\n    */\n\n   renderCards(index, users) {\n    let card = users[index];\n    let cardid = card.id;\n    console.log(card.image);\n\n    if (cardid !== \"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\" && this.state.filters.every(t => card.areas_of_interest && card.areas_of_interest.includes(t)) && this.state.tasks.every(t => card.tasks_tags && card.tasks_tags.includes(t)) && this.state.personalities.every(t => card.personalities && card.personalities.includes(t))) {\n      return (\n        <Card info={card} id={cardid}/>\n      );\n    }\n     else {\n      return '';\n    }\n  }\n    \n  \n\n    handleShow = (e) => {\n      e.preventDefault();\n      const { auth } = this.props;\n      if (!auth.uid) {\n        this.setState({ routeguarding: true });\n      } else this.setState({ show: true });\n    }\n  \n    handleClose = () => {\n      this.setState({ show: false });\n    }\n\n    handleCloseRedirect = () => {\n      this.setState({ routeguarding: false });\n    }\n\n    handleSubmit = (e) => {\n      e.preventDefault();\n      this.props.submitTicket(this.state);\n      this.setState({\n        show: false\n      })\n    } \n\n    handleChange = (e) => {\n      e.stopPropagation();\n      this.setState({\n        [e.target.id]: e.target.value\n      })\n    }\n\n    updateReduxTasks = (e) => {\n      e.preventDefault();\n    \n     if (e.target.className === \"unselected-button\") {\n      const helper = [...this.state.reduxtasks, e.target.id];\n      this.setState({ reduxtasks : helper });\n      e.target.className = \"selected-button\";\n     }\n      else {\n        const newfilters = this.state.reduxtasks.filter(tag => tag !== e.target.id);\n        this.setState({ reduxtasks : newfilters });\n        e.target.className = \"unselected-button\";\n      }\n    }\n\n\n    onlyFilters = async (e) => {\n      if (e.target.className === \"unselected-button\") {\n       const helper = [...this.state.filters, e.target.id];\n        this.setState({ filters : helper });\n        e.target.className = \"selected-button\";\n        return helper;\n       }\n        else {\n          const newfilters = this.state.filters.filter(tag => tag !== e.target.id);\n          this.setState({ filters : newfilters });\n          e.target.className = \"unselected-button\";\n          return newfilters;\n        }\n    }\n\n\n   filtersUpdateList = (newfilters) => {\n    const { users } = this.props;\n    var newprofilelist = [];\n    var i = 0;\n    while (i < users.length) {\n      if (this.state.filters.every(t => users && users[i].areas_of_interest && users[i].areas_of_interest.includes(t)) && this.state.tasks.every(t => users[i].tasks_tags && users[i].tasks_tags.includes(t)) && this.state.personalities.every(t => users[i].personalities && users[i].personalities.includes(t))) {\n        newprofilelist.push({id: users[i].id, profile: users[i]});\n      }\n      i++;\n    }\n    this.setState({currentprofilelist: newprofilelist});\n  }\n\n    updateFilters = async (e) => {\n      e.preventDefault();\n      this.onlyFilters(e)\n      .then((newfilters) => {\n        this.filtersUpdateList(newfilters);\n      })\n    }\n\n    onlyTasks = async (e) => {\n      if (e.target.className === \"unselected-button\") {\n        const helper = [...this.state.tasks, e.target.id];\n        this.setState({ tasks : helper });\n        e.target.className = \"selected-button\";\n        return helper;\n       }\n        else {\n          const newfilters = this.state.tasks.filter(tag => tag !== e.target.id);\n          this.setState({ tasks : newfilters });\n          e.target.className = \"unselected-button\";\n          return newfilters;\n        }\n    }\n\n\n    tasksUpdateList = (newtasks) => {\n      const { users } = this.props;\n      var newprofilelist = [];\n      var i = 0;\n      while (i < users.length) {\n        if (newtasks.every(t => users[i].tasks_tags && users[i].tasks_tags.includes(t)) && this.state.filters.every(t => users[i].areas_of_interest && users[i].areas_of_interest.includes(t))) {\n          newprofilelist.push({id: users[i].id, profile: users[i]});\n        }\n        i++;\n      }\n      this.setState({currentprofilelist: newprofilelist});\n    }\n\n\n    updateTasks = async (e) => {\n      e.preventDefault();\n      return this.onlyTasks(e)\n      .then((newtasks) => {\n        this.filtersUpdateList(newtasks);\n      })\n    }\n\n\n    onlyPersonalities = async (e) => {\n      if (e.target.className === \"unselected-button\") {\n        const helper = [...this.state.personalities, e.target.id];\n        this.setState({ personalities : helper });\n        e.target.className = \"selected-button\";\n        return helper;\n       }\n        else {\n          const newfilters = this.state.personalities.filter(tag => tag !== e.target.id);\n          this.setState({ personalities : newfilters });\n          e.target.className = \"unselected-button\";\n          return newfilters;\n        }\n    }\n\n\n    updatePersonalities = async (e) => {\n      e.preventDefault();\n      return this.onlyPersonalities(e)\n      .then((newtasks) => {\n        this.filtersUpdateList(newtasks);\n      })\n    }\n\n\n\n\n    showMatching = (e) => {\n      e.preventDefault();\n      if (!this.props.auth.uid) {\n        this.setState({ routeguarding: true})\n      } else {\n        this.setState({\n        showmatching: true\n      })  \n    }\n    }\n\n    handleMatching = (e) => {\n      e.preventDefault();\n      if (this.state.genderpreference !== \"\") {\n      this.props.startMatching(this.props.auth.uid, this.props.profile, this.props.profile.gender, this.state.genderpreference);\n      this.setState({\n        showmatching: false,\n        showmatchingwindow: true\n      })\n    }\n    }\n\n    closeMatching = () => {\n      this.setState({\n        showmatching: false\n      })\n    }\n\n    closeMatchingWindow = () => {\n      this.setState({\n        showmatchingwindow: false\n      })\n    }\n\n\n    showGroupMessaging = (e) => {\n      e.preventDefault();\n      if (!this.props.auth.uid) {\n        this.setState({ routeguarding: true })\n      } else this.setState({\n        showgroupmessaging: true\n      })\n    }\n\n    closeMessaging = () => {\n      this.setState({\n        showgroupmessaging: false\n      })\n    }\n  \n  \n    createMessage = (time) => {\n      let message = {};\n      message = { time: time, from : this.props.auth.uid, content: document.getElementById(\"message\").value };\n      return message;\n    }\n  \n\n    handleMessaging = (e) => {\n      e.preventDefault();\n      if (this.state.number !== 0 ) {\n      const date = new Date();\n      const time = date.getFullYear() + \"-\" + (date.getMonth() + 1) + \"-\" + date.getDate() + \" \" + date.getHours() + \":\" + date.getMinutes();\n      const message = this.createMessage(time);\n      this.props.groupMessaging(this.state.currentprofilelist, this.state.number, message, this.props.profile);\n      }\n    }\n\n    showInterestFilter = (e) => {\n      e.preventDefault();\n      this.setState({\n        interestFilterVisibility: true\n      })\n    }\n\n    closeInterestFilter = () => {\n      this.setState({\n        interestFilterVisibility: false\n      })\n    }\n\n    showTaskFilter = (e) => {\n      e.preventDefault();\n      this.setState({\n        taskFilterVisibility: true\n      })\n    }\n\n    closeTaskFilter = () => {\n      this.setState({\n        taskFilterVisibility: false\n      })\n    }\n\n    showPersonalityFilter = (e) => {\n      e.preventDefault();\n      this.setState({\n        personalityFilterVisibility: true\n      })\n    }\n\n    closePersonalityFilter = () => {\n      this.setState({\n        personalityFilterVisibility: false\n      })\n    }\n\n    handleTryAgain = (e) => {\n      e.preventDefault();\n      this.setState({\n        showmatchingwindow: false,\n        showmatching: true\n      })\n    }\n\n    changeMatching = () => {\n      document.getElementById(\"matching-button\").className = \"hovered-buttons\";\n      this.setState({\n        changeMatchingButton: true,\n      })\n    }\n\n    unchangeMatching = () => {\n      document.getElementById(\"matching-button\").className = \"initial-buttons\";\n      this.setState({\n        changeMatchingButton: false\n      })\n    }\n\n    changeMessaging = () => {\n      document.getElementById(\"messaging-button\").className = \"hovered-buttons\";\n      this.setState({\n        changeMessagingButton: true,\n      })\n    }\n\n    unchangeMessaging = () => {\n      document.getElementById(\"messaging-button\").className = \"initial-buttons\";\n      this.setState({\n        changeMessagingButton: false\n      })\n    }\n\n    \n\n      render() {\n\n        const { auth, users, profile, loading, sent, buddy, chatid, showmatchingwindow } = this.props;\n        var profilelist = [];\n\n        let founderprofile;\n        if (users) {\n          const founder = users.find(element => element.id === \"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\");\n          founderprofile = <Card info={ founder } id=\"hAOhg4jmoHVsjQ0nRva0l4ElBzk2\"></Card>;\n        }\n\n  \n        const buttonStyle = {\n            height: \"50px\",\n            width: \"500px\",\n            margin: \"45px\",\n            backgroundColor: '#fd9535',\n            textAlign: 'center',\n            color: \"#fff\",\n            fontSize: \"16px\",\n            shape: \"circle\",\n            fontWeight: \"bold\",\n        }\n\n        let box;\n        if (loading === true) {\n            box = <div class=\"loader\"></div>\n        }\n        else {\n            if (this.props.buddy !== \"\") {\n                \n                box = <MatchingWindow chat={chatid} buddy={buddy} close={this.closeMatchingWindow}/>\n                \n            }\n            else {\n                box = \n                  <div style={{ position: \"absolute\", left: \"35%\", top: \"35%\", border: \"1px solid\", backgroundColor: \"white\", width: \"550px\"}}>\n                    <button style={{float: \"right\", backgroundColor: \"white\", color: \"black\", border: \"0\", padding: \"0\" }} onClick={this.closeMatchingWindow}>x</button>\n                    <span style={{marginTop: \"15px\"}}>Sorry we cannot help you find a study/work buddy currently 😖</span>\n                    <Button variant=\"success\" type=\"submit\" style={{float: \"right\"}} onClick={this.handleTryAgain}>Try again?</Button>\n                  </div>\n            }\n        }\n\n\n        return (\n\n          <div>\n          {auth.uid || (auth.isEmpty && auth.isLoaded) ? \n          <div>\n\n\n            {<NavBar />}\n            \n            {auth.uid ?\n           <div className=\"chatbox-header\">\n             <ChatBox roomid={auth.uid} />\n           </div>\n           : null}\n           \n\n  \n            <Container className=\"background\" fluid style={{ zIndex: \"-1\", alignItems:\"center\"}}>\n\n\n            <div className=\"form-inline\" style={{ position: \"absolute\", top: \"15%\"}}>\n            <Button className=\"update-button\" onClick={this.handleShow} style={{ fontSize: \"large\", fontFamily: \"Comic Sans MS, cursive, sans-serif\" }}>Update your tasks here! 🤗</Button>\n           \n\n            \n            <div >\n            {this.state.changeMatchingButton ? <span className=\"matching-button\">Randomly find a study/work buddy instantly</span> : null}\n            <Button id=\"matching-button\" className=\"initial-buttons\" onMouseOver={this.changeMatching} onMouseLeave={this.unchangeMatching} onClick={this.showMatching} style={{ fontSize: \"large\", fontFamily: \"Comic Sans MS, cursive, sans-serif\" }}>\n            🎲</Button>\n            </div>\n           \n            </div>\n\n\n           \n\n\n\n            <Modal show={this.state.showgroupmessaging} onHide={this.closeMessaging}>\n                <Modal.Header closeButton></Modal.Header>\n                <Modal.Body>\n                  <form onSubmit={this.handleMessaging}>\n                    <span>Select a few tags on the page and send your message to up to 3 random users that have the tags in their profiles</span>\n                    <textarea id=\"message\" placeholder=\"Hi there...\" required></textarea>\n\n\n                      <div>\n                    \n                            <label>1</label><input type=\"radio\" id=\"number\" value={1} onChange={this.handleChange} checked={this.state.number === \"1\"} />   \n                      \n                            <label>2</label><input type=\"radio\" id=\"number\" value={2} onChange={this.handleChange} checked={this.state.number === \"2\"} />\n                    \n                            <label>3</label><input type=\"radio\" id=\"number\" value={3} onChange={this.handleChange} checked={this.state.number === \"3\"} />\n                        \n                      </div>\n                        \n\n                    <Button variant=\"success\" type=\"submit\">Send</Button>\n                  </form>\n                  { loading ?  <div class=\"loader\"></div> : null}\n                  { sent === 1 ? <span>Message sent!</span> : null }\n                  { sent === 2 ? <span>Sorry there are not enough users that satisfy the criteria, but the message has been sent to all the users if there are any! 😋</span> : null }\n                </Modal.Body>\n              </Modal>\n\n\n\n\n            <Modal show={this.state.showmatching} onHide={this.closeMatching}>\n              <Modal.Header closeButton></Modal.Header>\n              <Modal.Body>\n                <form onSubmit={this.handleMatching}>\n                  Match me with:\n                 \n                         <div>\n                            <label>Male only</label><input type=\"radio\" id=\"genderpreference\" value=\"Male\" onChange={this.handleChange} checked={this.state.genderpreference === \"Male\"}></input>   \n                            </div>\n                       \n                         <div>\n                            <label>Female only</label><input type=\"radio\" id=\"genderpreference\" value=\"Female\" onChange={this.handleChange} checked={this.state.genderpreference === \"Female\"} ></input>\n                            </div> \n\n                            <div>\n                            <label>Other only</label><input type=\"radio\" id=\"genderpreference\" value=\"Other\" onChange={this.handleChange} checked={this.state.genderpreference === \"Other\"} ></input>\n                            </div>\n\n                         <div>\n                            <label>I don't care 😢</label><input type=\"radio\" id=\"genderpreference\" value=\"None\" onChange={this.handleChange} checked={this.state.genderpreference === \"None\"} ></input>\n                            </div>\n                \n\n                  <Button variant=\"success\" type=\"submit\">Start matching</Button>\n                </form>\n              </Modal.Body>\n            </Modal>\n\n\n            { this.state.showmatchingwindow ? box : null }\n\n \n            \n\n\n            \n\n              \n              <Modal show={this.state.show} onHide={this.handleClose}>\n                <Modal.Header closeButton></Modal.Header>\n                <Modal.Body>\n                  <form onSubmit={this.handleSubmit}>\n                    <span>Describe your tasks today!</span>\n                    <textarea id=\"description\" onChange={this.handleChange} value={this.state.description} required></textarea>\n\n                    <span>Select a few tags:</span>\n\n                    <div className=\"form-inline\">\n                    {taskfilters.map(filter => {\n                      return (\n                        <div className={this.state.reduxtasks && this.state.reduxtasks.includes(filter) ? \"selected-button\" : \"unselected-button\" } id={filter} onClick={this.updateReduxTasks}>\n                          {filter}\n                        </div>\n                      )\n                    })}\n                    </div>\n\n                    <Button type=\"submit\" variant=\"success\">Submit</Button>\n                  </form>\n                </Modal.Body>\n              </Modal>\n\n              \n              <Modal show={this.state.routeguarding} onHide={this.handleCloseRedirect}>\n              <Modal.Header closeButton></Modal.Header>\n              <Modal.Body>\n              Sign up to create a profile so that other users can know more about you!😊\n              </Modal.Body>\n              </Modal>\n\n          <Container fluid style={{ position: \"absolute\", top: \"25%\", marginLeft:\"70px\", marginBottom: \"20px\", display: \"flex\", alignItems: \"center\",  zIndex: \"-1\"}}>\n\n          <span style={{ fontFamily: \"Lucida Console, Monaco, monospace\", fontSize: \"large\"}}>Filter by: </span>\n          \n          <Button variant=\"success\" style={{ fontFamily: \"Lucida Console, Monaco, monospace\", fontSize: \"large\", marginRight: \"10px\" }} onClick={this.showInterestFilter}>💛 Interests</Button>\n            <Modal id=\"interestfilter\" show={this.state.interestFilterVisibility} onHide={this.closeInterestFilter}>\n            <div className=\"form-inline\" style={{ margin: \"5px \"}}id=\"filters\">\n              {filters.map(filter => {\n                return (\n                  <div className={this.state.filters && this.state.filters.includes(filter) ? \"selected-button\" : \"unselected-button\"} id={filter} onClick={this.updateFilters}>\n                    {filter}\n                    </div>\n                );\n              })}\n            </div>\n            </Modal>\n\n            <Button variant=\"success\" style={{ fontFamily: \"Lucida Console, Monaco, monospace\", fontSize: \"large\", marginRight: \"10px\" }} onClick={this.showPersonalityFilter}>👻 Values</Button>\n            <Modal id=\"interestfilter\" show={this.state.personalityFilterVisibility} onHide={this.closePersonalityFilter}>\n            <div className=\"form-inline\" style={{ margin: \"5px \"}}id=\"filters\">\n              {personalities.map(filter => {\n                return (\n                  <div className={this.state.personalities && this.state.personalities.includes(filter) ? \"selected-button\" : \"unselected-button\"} id={filter} onClick={this.updatePersonalities}>\n                    {filter}\n                    </div>\n                );\n              })}\n            </div>\n            </Modal>\n\n            <Button variant=\"success\" style={{ fontFamily: \"Lucida Console, Monaco, monospace\", fontSize: \"large\", marginRight: \"10px\" }} onClick={this.showTaskFilter}>🏷 Tasks</Button>\n            <Modal id=\"interestfilter\" show={this.state.taskFilterVisibility} onHide={this.closeTaskFilter}>\n            <div className=\"form-inline\" style={{ margin: \"5px \"}}id=\"filters\">\n              {taskfilters.map(filter => {\n                return (\n                  <div className={this.state.tasks && this.state.tasks.includes(filter) ? \"selected-button\" : \"unselected-button\"} id={filter} onClick={this.updateTasks}>\n                    {filter}\n                    </div>\n                );\n              })}\n            </div>\n            </Modal>\n            \n\n            \n            </Container>\n          \n  \n\n            \n          <div style={{ position: \"absolute\", top: \"30%\", zIndex: \"-1\" }}>\n            <div id=\"cards\">\n            {founderprofile}\n              { users && users.map((card, index, users) => {\n                return this.renderCards(index, users, profilelist);\n              })}\n            </div>\n            </div>\n \n\n          </Container>\n      \n       \n      \n        </div>\n        : <div className=\"loader\"></div>}\n        </div>\n        );\n      }\n    }\n\nconst mapStateToProps = (state) => {\n  console.log('waiting cponent', state.firestore)\n  return {\n    users: state.firestore.ordered.users,\n    auth: state.firebase.auth,\n    profile: state.firebase.profile,\n    loading: state.auth.loading,\n    sent: state.auth.sent,\n    buddy: state.auth.buddy,\n    chatid: state.auth.chatid,\n    matching: state.auth.matching,\n    showmatchingwindow: state.auth.showmatchingwindow\n  }\n}\n    \nexport default compose(\nconnect(mapStateToProps, {submitTicket, startMatching, groupMessaging}),\nfirestoreConnect([\n{ collection: 'users' }\n])\n)(WaitingRoom);\n\n/*\n            <div>\n            {this.state.changeMessagingButton ? <span className=\"messaging-button\">Send a message to random people</span> : null}\n            <Button id=\"messaging-button\" className=\"initial-buttons\" onMouseOver={this.changeMessaging} onMouseLeave={this.unchangeMessaging} onClick={this.showGroupMessaging} style={{ fontSize: \"large\", fontFamily: \"Comic Sans MS, cursive, sans-serif\" }}>💌</Button>\n            </div>\n            */"]},"metadata":{},"sourceType":"module"}